<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clojure2d.extra.signal documentation</title><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clojure2d</span> <span class="project-version">1.3.0-alpha1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clojure2d</span></div></div></li><li class="depth-2 branch"><a href="clojure2d.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-2 branch"><a href="clojure2d.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extra</span></div></div></li><li class="depth-3 branch"><a href="clojure2d.extra.glitch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>glitch</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.overlays.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>overlays</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.raymarching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>raymarching</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.segmentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>segmentation</span></div></a></li><li class="depth-3 branch current"><a href="clojure2d.extra.signal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal</span></div></a></li><li class="depth-3"><a href="clojure2d.extra.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch"><a href="clojure2d.pixels.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>pixels</span></div></a></li><li class="depth-2"><a href="clojure2d.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clojure2d.extra.signal.html#var-apply-effects-to-pixels"><div class="inner"><span>apply-effects-to-pixels</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-effects-filter"><div class="inner"><span>effects-filter</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-pixels-.3Esignal"><div class="inner"><span>pixels-&gt;signal</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-signal-.3Epixels"><div class="inner"><span>signal-&gt;pixels</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clojure2d.extra.signal</h1><div class="doc"><div class="markdown"><p>Image pixels as signal</p>
<h3><a href="#pixels-as-signal" name="pixels-as-signal"></a>Pixels as Signal</h3>
<p><code>Pixels</code> (<code>Image</code>) can be treated as signal. Conversion to signal is based on strategies of converting image to RAW and then converting to audio. It includes channel data layout and packing into integer, encoding, endianess, etc.</p>
<p>To convert <code>Pixels</code> to signal use <a href="clojure2d.extra.signal.html#var-pixels-.3Esignal">pixels-&gt;signal</a> function. To convert back use <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a>. <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a> requires target <code>Pixels</code> object to store result of conversion. Target is mutated then.</p>
<p>To filter <code>Pixels</code> directly (without explicit conversion to and from Signals) you can use <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a> with <a href="clojure2d.extra.signal.html#var-effects-filter">effects-filter</a>.</p></div><div class="markdown"><h4>Categories</h4><ul><li>Effects: <a href="clojure2d.extra.signal.html#var-apply-effects-to-pixels">apply-effects-to-pixels</a> <a href="clojure2d.extra.signal.html#var-effects-filter">effects-filter</a></li><li>Signal: <a href="clojure2d.extra.signal.html#var-pixels-.3Esignal">pixels-&gt;signal</a> <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a></li></ul></div><div class="markdown"><h4>Code snippets</h4><div><blockquote><p>Save pixels to image.</p></blockquote><pre><code>(defn saver
  [f params &amp; opts]
  (let [n (str "images/signal/" (first opts) ".jpg")]
    (save (f (p/load-pixels "docs/cockatoo.jpg")) (str "docs/" n))
    (str "../" n)))</code></pre></div><div><blockquote><p>Image with applied effect</p></blockquote><pre><code>(defn draw-effect-on-pixels
  [f params &amp; opts]
  (let [n (str "images/signal/" (first opts) ".jpg")
        pix
        (apply-effects-to-pixels f (p/load-pixels "docs/cockatoo.jpg"))]
    (save pix (str "docs/" n))
    (str "../" n)))</code></pre></div></div></div><div class="public anchor" id="var-apply-effects-to-pixels"><h3>apply-effects-to-pixels</h3><div class="usage"><code>(apply-effects-to-pixels effects config config-back reset pixels)</code><code>(apply-effects-to-pixels effects pixels)</code><code>(apply-effects-to-pixels effects reset pixels)</code><code>(apply-effects-to-pixels effects config config-back pixels)</code></div><div class="doc"><div class="markdown"><p>Apply effects directly to <code>Pixels</code>.</p>
<p>Provide configurations to properly convert Pixels to Signal and back. Optionally set <code>reset</code> value (reinit effects’ state after <code>reset</code> samples).</p>
<p>If you prefer operating through <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a> use <a href="null">effect-filter</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply hpf to all channels</p></blockquote><pre><code class="hljs clojure">(saver
 (fn [in]
   (apply-effects-to-pixels (s/effect :simple-highpass {:cutoff 10})
                            {:channels :all, :bits 16}
                            {:channels :all, :planar? false, :bits 16}
                            in))
 ...)</code></pre><img src="../images/signal/7f70587d2ed65af477b044103d373860.jpg" /></div><div><blockquote><p>:simple-lowpass</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :simple-lowpass {:rate 200, :cutoff 2})
                       ...)</code></pre><img src="../images/signal/9c3128b4e3c07dcb0cb7153db9089ec2.jpg" /></div><div><blockquote><p>:simple-highpass</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :simple-highpass
                                 {:rate 200, :cutoff 10})
                       ...)</code></pre><img src="../images/signal/ace21a5d8cf2c5412f776cf3a150dd2d.jpg" /></div><div><blockquote><p>:biquad-eq</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :biquad-eq
                                 {:fs 200, :fc 10, :gain -10, :bw 4.0})
                       ...)</code></pre><img src="../images/signal/224e171f3c00b51a37a1bff392cb1711.jpg" /></div><div><blockquote><p>:biquad-hs</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels
 (s/effect :biquad-hs {:fs 200, :fc 2, :gain -10, :slope 2.0})
 ...)</code></pre><img src="../images/signal/d4a59d23fd825bda8004b857a7a557ac.jpg" /></div><div><blockquote><p>:biquad-ls</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :biquad-ls
                                 {:fs 200, :fc 5, :gain 5, :slope 2.0})
                       ...)</code></pre><img src="../images/signal/9196045005d6f663cbe5f8d851ccf91c.jpg" /></div><div><blockquote><p>:biquad-bp</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :biquad-bp {:fs 200, :fc 15, :bw 2})
                       ...)</code></pre><img src="../images/signal/a7178996d68732d39267aab320def2f5.jpg" /></div><div><blockquote><p>:biquad-lp</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :biquad-lp {:fs 200, :fc 15, :bw 2})
                       ...)</code></pre><img src="../images/signal/04d12a083c6f480621391e4654c2aed3.jpg" /></div><div><blockquote><p>:biquad-hp</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :biquad-hp {:fs 200, :fc 15, :bw 2})
                       ...)</code></pre><img src="../images/signal/470e29b1a06e2f9866b4cef0d62fa9e0.jpg" /></div><div><blockquote><p>:dj-eq</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :dj-eq
                                 {:rate 200,
                                  :high -10,
                                  :low -20,
                                  :mid 5.0,
                                  :peak-bw 5,
                                  :shelf-slope 5})
                       ...)</code></pre><img src="../images/signal/3d9d11f9297b77df44180f13cc898b8f.jpg" /></div><div><blockquote><p>:phaser-allpass</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :phaser-allpass {:delay 0.1}) ...)</code></pre><img src="../images/signal/975f691772182a5d717e082d106ac9fe.jpg" /></div><div><blockquote><p>:divider</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :divider {:denom 1}) ...)</code></pre><img src="../images/signal/c632f17fb50547d48bd57f7bf5571928.jpg" /></div><div><blockquote><p>:fm</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels
 (s/effect :fm {:quant 0.0, :omega 0.025, :phase 0.05})
 ...)</code></pre><img src="../images/signal/a4c1e86c8cfbda2964e6d8b1bc3f47ee.jpg" /></div><div><blockquote><p>:bandwidth-limit</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :bandwidth-limit {:rate 200, :freq 10})
                       ...)</code></pre><img src="../images/signal/dd40070c8b4bbbf93ed4b97e5f2395ac.jpg" /></div><div><blockquote><p>:distort</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :distort {:factor 0.1}) ...)</code></pre><img src="../images/signal/fc87703e3d550093b8723271f874c7e2.jpg" /></div><div><blockquote><p>:foverdrive</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :foverdrive {:drive 3.0}) ...)</code></pre><img src="../images/signal/9a1f54b6c382950bdc37e5da084f4376.jpg" /></div><div><blockquote><p>:decimator</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :decimator
                                 {:bits 4, :rate 200, :fs 10})
                       ...)</code></pre><img src="../images/signal/1f97f7c8632261d5dfa82df5b18dc67f.jpg" /></div><div><blockquote><p>:basstreble</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :basstreble
                                 {:rate 200,
                                  :treble-freq 60,
                                  :bass-freq 2.0,
                                  :bass -5,
                                  :treble -5,
                                  :gain 2.0,
                                  :slope 1.0})
                       ...)</code></pre><img src="../images/signal/df10d6a25d1c51de3f8eac85781c0667.jpg" /></div><div><blockquote><p>:echo</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :echo
                                 {:delay 0.912, :decay 0.3, :rate 200})
                       ...)</code></pre><img src="../images/signal/130745c50532a32e9f5cf8f876418c6c.jpg" /></div><div><blockquote><p>:vcf303</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :vcf303
                                 {:gain 3.0,
                                  :rate 200,
                                  :trigger false,
                                  :cutoff 0.1,
                                  :resonance 1.1,
                                  :env-mod 0.9})
                       ...)</code></pre><img src="../images/signal/dfade6f798e747edcff6089aacc375c7.jpg" /></div><div><blockquote><p>:slew-limit</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :slew-limit
                                 {:rate 200, :maxrise 2, :maxfall 10})
                       ...)</code></pre><img src="../images/signal/0fc9ba14048715d2d1e2cece46313f25.jpg" /></div><div><blockquote><p>:mda-thru-zero</p></blockquote><pre><code class="hljs clojure">(draw-effect-on-pixels (s/effect :mda-thru-zero
                                 {:rate 200,
                                  :speed 0.9,
                                  :depth 1.0,
                                  :mix 0.8,
                                  :depth-mod 1.9,
                                  :feedback 0.9})
                       ...)</code></pre><img src="../images/signal/297017a3736865c17d589d9fac741e4b.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L107">view source</a></div></div><div class="public anchor" id="var-effects-filter"><h3>effects-filter</h3><div class="usage"><code>(effects-filter effects config config-back reset)</code><code>(effects-filter effects)</code><code>(effects-filter effects reset)</code><code>(effects-filter effects config config-back)</code></div><div class="doc"><div class="markdown"><p>Creates filter to process <code>Pixels</code> as <code>Signal</code> using <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a>.</p>
<p>Provide configurations to properly convert Pixels to Signal and back. Optionally set <code>reset</code> value (reinit effects’ state after <code>reset</code> samples).</p>
<p>Filter operates on one channel at time and is defined to be used with <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a>. If you want to operate on <code>Pixels</code> directly, use <a href="clojure2d.extra.signal.html#var-apply-effects-to-pixels">apply-effects-to-pixels</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply lpf to the image</p></blockquote><pre><code class="hljs clojure">(saver (fn [in]
         (let [lpf (effects-filter (s/effect :simple-highpass
                                             {:cutoff 1000}))]
           (p/filter-channels lpf in)))
       ...)</code></pre><img src="../images/signal/6f94351c8dfa190961cf9411a8282e8d.jpg" /></div><div><blockquote><p>Apply lpf to the image, with some conversion parametrization</p></blockquote><pre><code class="hljs clojure">(saver
 (fn [in]
   (let [lpf (effects-filter (s/effect :simple-lowpass {:cutoff 500})
                             {:signed? true}
                             {:signed? true}
                             15)]
     (p/filter-channels lpf in)))
 ...)</code></pre><img src="../images/signal/d4bf075451e33c1b5b882bf02c335c95.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L87">view source</a></div></div><div class="public anchor" id="var-pixels-.3Esignal"><h3>pixels-&gt;signal</h3><div class="usage"><code>(pixels-&gt;signal p {:keys [planar? signed? little-endian? bits channels coding], :or {planar? true, little-endian? true, bits 8, signed? false, channels [0 1 2], coding :none}})</code><code>(pixels-&gt;signal p)</code></div><div class="doc"><div class="markdown"><p>Convert <code>Pixels</code> to <code>Signal</code> for given specifications.</p>
<p>Specification for conversion is based on Audacity importing options and image to RAW conversions practices. Spec contains:</p>
<ul>
  <li><code>planar?</code> - layout of channels data, planar (true, default) or interleaved (false)</li>
  <li><code>signed?</code> - channel data are encoded as signed (true, default) or unsigned (false) integer.</li>
  <li><code>little-endian?</code> - for 16 and 24 bits pack channel data with little-endian order (true, default) or big-endian (false)</li>
  <li><code>bits</code> - pack channel data in 8 (default), 16 or 24 bits.</li>
  <li><code>channels</code> - list of channels to convert to signal, default <code>[0 1 2]</code> (for all you can use <code>:all</code> keyword).</li>
  <li><code>coding</code> - encode signal with one of the encoders: <code>:alaw</code>, <code>:alaw-rev</code>, <code>:ulaw</code>, <code>:ulaw-rev</code> or <code>:none</code> (default).</li>
</ul>
<p>Pixels can be restored from Signal with <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a> function.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Basic usage</p></blockquote><pre><code class="hljs clojure">(pixels-&gt;signal (p/load-pixels "docs/cockatoo.jpg"))
;;=&gt; [D@786f0df5</code></pre></div><div><blockquote><p>Custom configuration</p></blockquote><pre><code class="hljs clojure">(pixels-&gt;signal (p/load-pixels "docs/cockatoo.jpg")
                {:planar? false,
                 :signed? true,
                 :bits 24,
                 :coding :ulaw,
                 :channels [2 1]})
;;=&gt; [D@1beb1b8d</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L38">view source</a></div></div><div class="public anchor" id="var-signal-.3Epixels"><h3>signal-&gt;pixels</h3><div class="usage"><code>(signal-&gt;pixels sig target {:keys [planar? signed? little-endian? bits channels coding], :or {planar? true, little-endian? true, bits 8, signed? false, channels [0 1 2], coding :none}})</code><code>(signal-&gt;pixels sig target)</code></div><div class="doc"><div class="markdown"><p>Convert <code>Signal</code> to <code>Pixels</code> storing result into <code>target</code> (mutating it!).</p>
<p>Specification is the same as in <a href="null">pixels-signal</a> functions.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Basic usage</p></blockquote><pre><code class="hljs clojure">(let [p (p/load-pixels "docs/cockatoo.jpg")
      target (p/clone-pixels p)]
  (signal-&gt;pixels (pixels-&gt;signal p) target))
;;=&gt; pixels (150, 150)</code></pre></div><div><blockquote><p>Custom configuration</p></blockquote><pre><code class="hljs clojure">(let [p (p/load-pixels "docs/cockatoo.jpg")
      target (p/clone-pixels p)
      conf-in {:planar? false,
               :signed? true,
               :bits 24,
               :coding :alaw,
               :channels [2 1]}
      conf-out (merge conf-in {:coding :alaw-rev})]
  (signal-&gt;pixels (pixels-&gt;signal p conf-in) target conf-out))
;;=&gt; pixels (150, 150)</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L63">view source</a></div></div></div></body></html>