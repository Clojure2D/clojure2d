<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clojure2d.pixels documentation</title><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clojure2d</span> <span class="project-version">1.4.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clojure2d</span></div></div></li><li class="depth-2"><a href="clojure2d.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3"><a href="clojure2d.color.blend.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blend</span></div></a></li><li class="depth-2 branch"><a href="clojure2d.core.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extra</span></div></div></li><li class="depth-3 branch"><a href="clojure2d.extra.glitch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>glitch</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.overlays.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>overlays</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.raymarching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>raymarching</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.segmentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>segmentation</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.signal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal</span></div></a></li><li class="depth-3"><a href="clojure2d.extra.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch current"><a href="clojure2d.pixels.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>pixels</span></div></a></li><li class="depth-2"><a href="clojure2d.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clojure2d.pixels.html#var-*pixels-edge*"><div class="inner"><span>*pixels-edge*</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-add-pixel.21"><div class="inner"><span>add-pixel!</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-blend-channel"><div class="inner"><span>blend-channel</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-blend-channel-xy"><div class="inner"><span>blend-channel-xy</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-blend-channels"><div class="inner"><span>blend-channels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-box-blur"><div class="inner"><span>box-blur</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-box-blur-1"><div class="inner"><span>box-blur-1</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-box-blur-2"><div class="inner"><span>box-blur-2</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-box-blur-3"><div class="inner"><span>box-blur-3</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-box-blur-5"><div class="inner"><span>box-blur-5</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-brightness-contrast"><div class="inner"><span>brightness-contrast</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-clone-pixels"><div class="inner"><span>clone-pixels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-compose-channels"><div class="inner"><span>compose-channels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-composite"><div class="inner"><span>composite</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-dilate"><div class="inner"><span>dilate</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-dilate-cross"><div class="inner"><span>dilate-cross</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-equalize"><div class="inner"><span>equalize</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-erode"><div class="inner"><span>erode</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-erode-cross"><div class="inner"><span>erode-cross</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-filter-channel"><div class="inner"><span>filter-channel</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-filter-channel-xy"><div class="inner"><span>filter-channel-xy</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-filter-channels"><div class="inner"><span>filter-channels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-filter-colors"><div class="inner"><span>filter-colors</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-filter-colors-xy"><div class="inner"><span>filter-colors-xy</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-gaussian-blur"><div class="inner"><span>gaussian-blur</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-gaussian-blur-1"><div class="inner"><span>gaussian-blur-1</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-gaussian-blur-2"><div class="inner"><span>gaussian-blur-2</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-gaussian-blur-3"><div class="inner"><span>gaussian-blur-3</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-gaussian-blur-5"><div class="inner"><span>gaussian-blur-5</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-get-channel"><div class="inner"><span>get-channel</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-get-color"><div class="inner"><span>get-color</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-get-pixel"><div class="inner"><span>get-pixel</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-get-value"><div class="inner"><span>get-value</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-gradient-renderer"><div class="inner"><span>gradient-renderer</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-horizontal-blur"><div class="inner"><span>horizontal-blur</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-horizontal-blur-1"><div class="inner"><span>horizontal-blur-1</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-horizontal-blur-2"><div class="inner"><span>horizontal-blur-2</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-horizontal-blur-3"><div class="inner"><span>horizontal-blur-3</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-horizontal-blur-5"><div class="inner"><span>horizontal-blur-5</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-load-pixels"><div class="inner"><span>load-pixels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-median"><div class="inner"><span>median</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-merge-gradient-renderers"><div class="inner"><span>merge-gradient-renderers</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-merge-renderers"><div class="inner"><span>merge-renderers</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-modulate"><div class="inner"><span>modulate</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-negate"><div class="inner"><span>negate</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-normalize"><div class="inner"><span>normalize</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-pixels"><div class="inner"><span>pixels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-posterize"><div class="inner"><span>posterize</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-posterize-16"><div class="inner"><span>posterize-16</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-posterize-4"><div class="inner"><span>posterize-4</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-posterize-8"><div class="inner"><span>posterize-8</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-quantile-1"><div class="inner"><span>quantile-1</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-quantile-2"><div class="inner"><span>quantile-2</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-quantile-3"><div class="inner"><span>quantile-3</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-quantile-5"><div class="inner"><span>quantile-5</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-quantile-6"><div class="inner"><span>quantile-6</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-quantile-7"><div class="inner"><span>quantile-7</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-renderer"><div class="inner"><span>renderer</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-set-canvas-pixels.21"><div class="inner"><span>set-canvas-pixels!</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-set-channel.21"><div class="inner"><span>set-channel!</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-set-color.21"><div class="inner"><span>set-color!</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-set-image-pixels.21"><div class="inner"><span>set-image-pixels!</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-set-value.21"><div class="inner"><span>set-value!</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-solarize"><div class="inner"><span>solarize</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-threshold"><div class="inner"><span>threshold</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-threshold-25"><div class="inner"><span>threshold-25</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-threshold-50"><div class="inner"><span>threshold-50</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-threshold-75"><div class="inner"><span>threshold-75</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-tint"><div class="inner"><span>tint</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-to-pixels"><div class="inner"><span>to-pixels</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-vertical-blur"><div class="inner"><span>vertical-blur</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-vertical-blur-1"><div class="inner"><span>vertical-blur-1</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-vertical-blur-2"><div class="inner"><span>vertical-blur-2</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-vertical-blur-3"><div class="inner"><span>vertical-blur-3</span></div></a></li><li class="depth-1"><a href="clojure2d.pixels.html#var-vertical-blur-5"><div class="inner"><span>vertical-blur-5</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clojure2d.pixels</h1><div class="doc"><div class="markdown"><p>Operations on pixel levels.</p>
<h2><a href="#content" name="content"></a>Content</h2>
<p>Namespace defines three main concepts:</p>
<ul>
  <li>Pixels - channel values packed into array.</li>
  <li>Processors - parallel Pixels processing functions (like filters).</li>
  <li>Bins - log density renderer</li>
</ul>
<h2><a href="#pixels" name="pixels"></a>Pixels</h2>
<p>Pixels is type which represents image as int array divided into color channels. Layout is linear and interleaved which means that array is 1D and each pixel is represented by four consecutive values R, G, B, A. After first row goes second and so on.</p>
<p>Pixels allows mutation, you can read and set channel value or color:</p>
<ul>
  <li><a href="clojure2d.pixels.html#var-get-value">get-value</a>, <a href="null">set-value</a> - read or set channel value for given pixel and channel. Value should be within <code>[0-255]</code> range.</li>
  <li><a href="clojure2d.pixels.html#var-get-color">get-color</a>, <a href="clojure2d.core.html#var-set-color">set-color</a> - read or set color for given pixel. Returned color has <a href="null">Vec4</a> type.</li>
  <li><a href="clojure2d.pixels.html#var-get-channel">get-channel</a>, <a href="clojure2d.color.html#var-set-channel">set-channel</a> - read or set whole channel as <code>ints</code>.</li>
</ul>
<p>Pixel access can be made by <code>(x,y)</code> coordinates or by index which is equivalent to <code>(+ x (* y width))</code>.</p>
<p>Pixels implement <a href="clojure2d.protocols.html#var-ImageProto">ImageProto</a>.</p>
<h3><a href="#creation-conversions" name="creation-conversions"></a>Creation / conversions</h3>
<p>To create empty Pixels, call <a href="clojure2d.pixels.html#var-pixels">pixels</a>.</p>
<p>You can also get and set Pixels from and to Images and Canvases or read from file.</p>
<h2><a href="#processors" name="processors"></a>Processors</h2>
<p>Library supports several processing functions and helpers to parallely manipulate channels or colors. All functions are not destrictive, that means new object is created to store result of manipulation. Every processor accept one or more filtering functions which do the job. There are three main functions:</p>
<ul>
  <li><a href="clojure2d.pixels.html#var-filter-colors">filter-colors</a> - to process colors. Uses function <code>f</code> which accepts color and should return color. Can be used to convert Pixels between different color spaces.</li>
  <li><a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a> - to process channel values. Uses function <code>f</code> which accepts channel number (values from 0 to 3), target Pixels and source Pixels and returns integer. You can provide different function for every channel. Can be used to apply filter (like blur).</li>
  <li><a href="clojure2d.pixels.html#var-blend-channels">blend-channels</a> - to process pair of Pixels. Uses function <code>f</code> which accepts channel number, target and two Pixel values. <a href="clojure2d.pixels.html#var-compose-channels">compose-channels</a> wrapper can be used to compose two Pixels using one of the blending functions defined in <a href="null">clojure2d.colors</a> namespace.</li>
</ul>
<p>Additionally other processing functions are prepared in case you want write own filters or converters:</p>
<ul>
  <li><a href="clojure2d.pixels.html#var-filter-colors-xy">filter-colors-xy</a> - process colors using function <code>f</code> which accepts Pixels and current position.</li>
  <li><a href="clojure2d.pixels.html#var-filter-channel">filter-channel</a> - iterate through channel, <code>f</code> accepts channel value and returns new channel value</li>
  <li><a href="clojure2d.pixels.html#var-filter-channel-xy">filter-channel-xy</a> - iterate through channel, <code>f</code> accepts channel, Pixels and x,y position</li>
  <li><a href="clojure2d.pixels.html#var-blend-channels">blend-channels</a> and <a href="clojure2d.pixels.html#var-blend-channel-xy">blend-channel-xy</a> - similar to two above, <code>f</code> accepts two Pixels instead of one.</li>
</ul>
<h3><a href="#color-space" name="color-space"></a>Color space</h3>
<p>To convert whole Pixels into different color space use <a href="clojure2d.pixels.html#var-filter-colors">filter-colors</a> and pass one of the color space conversion functions defined under <a href="clojure2d.color.html#var-colorspaces*">colorspaces*</a>. Always use normalized version.</p>
<pre><code>(filter-colors c/to-HSB* pixels-object)
</code></pre>
<h3><a href="#filters" name="filters"></a>Filters</h3>
<p>There are several ready to use filters. All defined under <a href="null">filters-list</a> variable. Some of the filters are creators and should be called with parametrization.</p>
<pre><code>(filter-channels gaussian-blur-3 pixels-object)
(filter-channels (posterize 10) pixels-object)
</code></pre>
<h3><a href="#composing" name="composing"></a>Composing</h3>
<p>To compose two Pixels use <a href="clojure2d.pixels.html#var-compose-channels">compose-channels</a> and use name of composing function defined <a href="clojure2d.color.blend.html#var-blends-list">blends-list</a>. Instead of name you can pass custom composing function.</p>
<pre><code>(compose-channels :multiply pixels-1 pixels-2)
</code></pre>
<h2><a href="#log-density-rendering" name="log-density-rendering"></a>Log Density Rendering</h2>
<p>Log Density Renderer was orginally created for fractal flames rendering and produces very smooth results. Details are described in this <a href="http://flam3.com/flame.pdf">paper</a>.</p>
<p>Renderer is point based (no other primitives) and supports selection of antialiasing (reconstruction) filters. Density estimation is not supported.</p>
<p>Rendering algorithm collects color channels values and counts number of hits for each pixel. For each pixel weighted average of all color values is calculated and log of number of hits gives alpha value. Pixel color is blended with background using alpha.</p>
<h3><a href="#rendering" name="rendering"></a>Rendering</h3>
<p>First you have to create renderer with <a href="clojure2d.pixels.html#var-renderer">renderer</a> function. By default no filter is used. In case you want to use filter call with: filter name as keyword (see below), optional: filter radius (default 2.0) and other filter parameters.</p>
<p>To set point call <a href="clojure2d.core.html#var-set-color">set-color</a>.</p>
<h4><a href="#antialiasing-filters" name="antialiasing-filters"></a>Antialiasing filters</h4>
<p>Below you have list of all available antialiasing filters. Each filter has radius and spread parameter.</p>
<ul>
  <li>:gaussian</li>
  <li>:box - only radius</li>
  <li>:sinc - Windowed sinc filter</li>
  <li>:mitchell - Mitchell-Netravali filter, additional parameters: B and C (default: 1/3)</li>
  <li>:cubic</li>
  <li>:catmull</li>
  <li>:triangle</li>
  <li>:cosinebell</li>
  <li>:blackmann-harris</li>
  <li>:hann</li>
  <li>:none or <code>nil</code> - no filter</li>
</ul>
<h3><a href="#converting" name="converting"></a>Converting</h3>
<p>To convert renderer to Pixels just call <a href="clojure2d.pixels.html#var-to-pixels">to-pixels</a> method with optional configuration. Configuration gives you possibility to control process of transformation to RGB data.</p>
<p>Configuration is a map with following fields:</p>
<ul>
  <li>:background - color of the background (default: :black)</li>
  <li>:gamma-alpha - gamma correction for alpha</li>
  <li>:gamma-color - gamma correction for color, to adjust vibrancy</li>
  <li>:vibrancy: 0.0 - use calculated color 1.0 - use gamma corrected color (0.0-1.0) - mix between above</li>
  <li>:saturation - adjust saturation (0-2)</li>
  <li>:brightness - adjust brightness (0-2)</li>
  <li>:contrast - adjust contrast (0-2)</li>
</ul>
<h3><a href="#parallel-rendering" name="parallel-rendering"></a>Parallel rendering</h3>
<p>Construction of renderer enables parallel computing. Just create as many renderers as you want (you may use <a href="clojure2d.core.html#var-available-tasks">available-tasks</a> value), run rendering in separate threads and then merge result with <a href="clojure2d.pixels.html#var-merge-renderers">merge-renderers</a>.</p></div><div class="markdown"><h4>Categories</h4><ul><li>Filters: <a href="clojure2d.pixels.html#var-blend-channel">blend-channel</a> <a href="clojure2d.pixels.html#var-blend-channel-xy">blend-channel-xy</a> <a href="clojure2d.pixels.html#var-blend-channels">blend-channels</a> <a href="clojure2d.pixels.html#var-box-blur">box-blur</a> <a href="clojure2d.pixels.html#var-box-blur-1">box-blur-1</a> <a href="clojure2d.pixels.html#var-box-blur-2">box-blur-2</a> <a href="clojure2d.pixels.html#var-box-blur-3">box-blur-3</a> <a href="clojure2d.pixels.html#var-box-blur-5">box-blur-5</a> <a href="clojure2d.pixels.html#var-brightness-contrast">brightness-contrast</a> <a href="clojure2d.pixels.html#var-compose-channels">compose-channels</a> <a href="clojure2d.pixels.html#var-composite">composite</a> <a href="clojure2d.pixels.html#var-dilate">dilate</a> <a href="clojure2d.pixels.html#var-dilate-cross">dilate-cross</a> <a href="clojure2d.pixels.html#var-equalize">equalize</a> <a href="clojure2d.pixels.html#var-erode">erode</a> <a href="clojure2d.pixels.html#var-erode-cross">erode-cross</a> <a href="clojure2d.pixels.html#var-filter-channel">filter-channel</a> <a href="clojure2d.pixels.html#var-filter-channel-xy">filter-channel-xy</a> <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a> <a href="clojure2d.pixels.html#var-filter-colors">filter-colors</a> <a href="clojure2d.pixels.html#var-filter-colors-xy">filter-colors-xy</a> <a href="clojure2d.pixels.html#var-gaussian-blur">gaussian-blur</a> <a href="clojure2d.pixels.html#var-gaussian-blur-1">gaussian-blur-1</a> <a href="clojure2d.pixels.html#var-gaussian-blur-2">gaussian-blur-2</a> <a href="clojure2d.pixels.html#var-gaussian-blur-3">gaussian-blur-3</a> <a href="clojure2d.pixels.html#var-gaussian-blur-5">gaussian-blur-5</a> <a href="clojure2d.pixels.html#var-horizontal-blur">horizontal-blur</a> <a href="clojure2d.pixels.html#var-horizontal-blur-1">horizontal-blur-1</a> <a href="clojure2d.pixels.html#var-horizontal-blur-2">horizontal-blur-2</a> <a href="clojure2d.pixels.html#var-horizontal-blur-3">horizontal-blur-3</a> <a href="clojure2d.pixels.html#var-horizontal-blur-5">horizontal-blur-5</a> <a href="clojure2d.pixels.html#var-median">median</a> <a href="clojure2d.pixels.html#var-modulate">modulate</a> <a href="clojure2d.pixels.html#var-negate">negate</a> <a href="clojure2d.pixels.html#var-normalize">normalize</a> <a href="clojure2d.pixels.html#var-posterize">posterize</a> <a href="clojure2d.pixels.html#var-posterize-16">posterize-16</a> <a href="clojure2d.pixels.html#var-posterize-4">posterize-4</a> <a href="clojure2d.pixels.html#var-posterize-8">posterize-8</a> <a href="clojure2d.pixels.html#var-quantile-1">quantile-1</a> <a href="clojure2d.pixels.html#var-quantile-2">quantile-2</a> <a href="clojure2d.pixels.html#var-quantile-3">quantile-3</a> <a href="clojure2d.pixels.html#var-quantile-5">quantile-5</a> <a href="clojure2d.pixels.html#var-quantile-6">quantile-6</a> <a href="clojure2d.pixels.html#var-quantile-7">quantile-7</a> <a href="clojure2d.pixels.html#var-solarize">solarize</a> <a href="clojure2d.pixels.html#var-threshold">threshold</a> <a href="clojure2d.pixels.html#var-threshold-25">threshold-25</a> <a href="clojure2d.pixels.html#var-threshold-50">threshold-50</a> <a href="clojure2d.pixels.html#var-threshold-75">threshold-75</a> <a href="clojure2d.pixels.html#var-tint">tint</a> <a href="clojure2d.pixels.html#var-vertical-blur">vertical-blur</a> <a href="clojure2d.pixels.html#var-vertical-blur-1">vertical-blur-1</a> <a href="clojure2d.pixels.html#var-vertical-blur-2">vertical-blur-2</a> <a href="clojure2d.pixels.html#var-vertical-blur-3">vertical-blur-3</a> <a href="clojure2d.pixels.html#var-vertical-blur-5">vertical-blur-5</a></li><li>Log density renderer: <a href="clojure2d.pixels.html#var-add-pixel.21">add-pixel!</a> <a href="clojure2d.pixels.html#var-get-color">get-color</a> <a href="clojure2d.pixels.html#var-get-pixel">get-pixel</a> <a href="clojure2d.pixels.html#var-gradient-renderer">gradient-renderer</a> <a href="clojure2d.pixels.html#var-merge-gradient-renderers">merge-gradient-renderers</a> <a href="clojure2d.pixels.html#var-merge-renderers">merge-renderers</a> <a href="clojure2d.pixels.html#var-renderer">renderer</a> <a href="clojure2d.pixels.html#var-set-color.21">set-color!</a> <a href="clojure2d.pixels.html#var-to-pixels">to-pixels</a></li><li>Pixels: <a href="clojure2d.pixels.html#var-*pixels-edge*">*pixels-edge*</a> <a href="clojure2d.pixels.html#var-clone-pixels">clone-pixels</a> <a href="clojure2d.pixels.html#var-get-channel">get-channel</a> <a href="clojure2d.pixels.html#var-get-color">get-color</a> <a href="clojure2d.pixels.html#var-get-value">get-value</a> <a href="clojure2d.pixels.html#var-load-pixels">load-pixels</a> <a href="clojure2d.pixels.html#var-pixels">pixels</a> <a href="clojure2d.pixels.html#var-set-canvas-pixels.21">set-canvas-pixels!</a> <a href="clojure2d.pixels.html#var-set-channel.21">set-channel!</a> <a href="clojure2d.pixels.html#var-set-color.21">set-color!</a> <a href="clojure2d.pixels.html#var-set-image-pixels.21">set-image-pixels!</a> <a href="clojure2d.pixels.html#var-set-value.21">set-value!</a> <a href="clojure2d.pixels.html#var-to-pixels">to-pixels</a></li></ul><p>Other vars: <a>-&gt;GradientRenderer</a> <a>-&gt;LDRenderer</a> <a>-&gt;Pixels</a> <a>map-&gt;GradientRenderer</a> <a>map-&gt;LDRenderer</a></p></div><div class="markdown"><h4>Code snippets</h4><div><blockquote><p>Save pixels to image.</p></blockquote><pre><code>(defn saver
  [f params &amp; opts]
  (let [n (str "images/pixels/" (first opts) ".jpg")]
    (core/save (f) (str "docs/" n))
    (str "../" n)))</code></pre></div></div></div><div class="public anchor" id="var-*pixels-edge*"><h3>*pixels-edge*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>If you access pixels which is outside possible range. You’ll always get some value. You can control what is returned by setting this variable. Possible values are:</p>
<ul>
  <li><code>:zero</code> - set <code>0</code></li>
  <li><code>:edge</code> - value from the edge of the image (left, right, top, bottom or corners) (default)</li>
  <li><code>:wrap</code> - wrap around image</li>
  <li>or channel value 0-255 - set specific value</li>
</ul></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Access pixels outside image range.</p></blockquote><pre><code class="hljs clojure">(binding [*pixels-edge* :zero] (get-color cockatoo -1 10))
;;=&gt; [0.0 0.0 0.0 255.0]
(get-color cockatoo 0 10)
;;=&gt; [54.0 94.0 155.0 255.0]
(binding [*pixels-edge* :edge] (get-color cockatoo -1 10))
;;=&gt; [54.0 94.0 155.0 255.0]
(get-color cockatoo (- (core/width cockatoo) 100) 10)
;;=&gt; [186.0 102.0 76.0 255.0]
(binding [*pixels-edge* :wrap] (get-color cockatoo -100 10))
;;=&gt; [186.0 102.0 76.0 255.0]
(binding [*pixels-edge* 123] (get-color cockatoo -1 10))
;;=&gt; [123.0 123.0 123.0 255.0]</code></pre></div><div><blockquote><p>Get values from second channel from outside image range.</p></blockquote><pre><code class="hljs clojure">(binding [*pixels-edge* :zero] (get-value cockatoo 1 -1 10))
;;=&gt; 0
(get-value cockatoo 1 0 10)
;;=&gt; 94
(binding [*pixels-edge* :edge] (get-value cockatoo 1 -1 10))
;;=&gt; 94
(get-value cockatoo 1 (- (core/width cockatoo) 100) 10)
;;=&gt; 102
(binding [*pixels-edge* :wrap] (get-value cockatoo 1 -100 10))
;;=&gt; 102
(binding [*pixels-edge* 123] (get-value cockatoo 1 -1 10))
;;=&gt; 123</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L145">view source</a></div></div><div class="public anchor" id="var-add-pixel.21"><h3>add-pixel!</h3><div class="usage"><code>(add-pixel! r x y)</code><code>(add-pixel! r x y c)</code></div><div class="doc"><div class="markdown"><p>Add pixel to renderer buffer.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L919">view source</a></div></div><div class="public anchor" id="var-blend-channel"><h3>blend-channel</h3><div class="usage"><code>(blend-channel f ch target p1 p2)</code><code>(blend-channel f)</code></div><div class="doc"><div class="markdown"><p>Blend one channel, write result into target.</p>
<p>Blending function should two channel values and return new channel value.</p>
<p>This should be considered as helper function for <a href="clojure2d.pixels.html#var-blend-channels">blend-channels</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Create own blending function and apply to second channel of image and its blurred version.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [target (clone-pixels cockatoo)
               wrong-avg (fn [v1 v2] (/ (+ v1 v2) 4.0))]
           (blend-channel wrong-avg
                          1
                          target
                          cockatoo
                          (filter-channels box-blur-5 cockatoo))
           target))
       ...)</code></pre><img src="../images/pixels/059a1b0520b366ed96ee1e5bde98b98e.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L416">view source</a></div></div><div class="public anchor" id="var-blend-channel-xy"><h3>blend-channel-xy</h3><div class="usage"><code>(blend-channel-xy f ch target p1 p2)</code><code>(blend-channel-xy f)</code></div><div class="doc"><div class="markdown"><p>Blend one channel, write result into target.</p>
<p>Blending function should accept channel, two <code>Pixels</code> and position x,y.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Create flip blender and apply to second channel.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [target (clone-pixels cockatoo)
               flip-blend (fn [ch p1 p2 x y]
                            (let [v1 (get-value p1 ch y x)
                                  v2 (get-value p2 ch x y)]
                              (/ (+ v1 v2) 2.0)))]
           (blend-channel-xy flip-blend 1 target cockatoo cockatoo)
           target))
       ...)</code></pre><img src="../images/pixels/1baca840f996c620f21846ad47358e94.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L429">view source</a></div></div><div class="public anchor" id="var-blend-channels"><h3>blend-channels</h3><div class="usage"><code>(blend-channels f0 f1 f2 f3 p1 p2)</code><code>(blend-channels f p1 p2)</code><code>(blend-channels f do-alpha? p1 p2)</code></div><div class="doc"><div class="markdown"><p>Blend channels parallelly.</p>
<p>Similar to <code>filter-channels</code>. Bleding function should accept: channel, target and two source pixels.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Create flip blender and apply to image.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [flip-blend (fn [ch p1 p2 x y]
                            (let [v1 (get-value p1 ch y x)
                                  v2 (get-value p2 ch x y)]
                              (/ (+ v1 v2) 2.0)))]
           (blend-channels (partial blend-channel-xy flip-blend)
                           cockatoo
                           cockatoo)))
       ...)</code></pre><img src="../images/pixels/aded4abc8ae087a4450770086e90d42f.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L441">view source</a></div></div><div class="public anchor" id="var-box-blur"><h3>box-blur</h3><div class="usage"><code>(box-blur radius)</code></div><div class="doc"><div class="markdown"><p>Create box blur for given radius.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (box-blur 20) cockatoo)) ...)</code></pre><img src="../images/pixels/769c03a6a6a481e48088ad4c336f4e0e.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L575">view source</a></div></div><div class="public anchor" id="var-box-blur-1"><h3>box-blur-1</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels box-blur-1 cockatoo)) ...)</code></pre><img src="../images/pixels/55c1345811c04f478bdafb79030b5cb1.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L582">view source</a></div></div><div class="public anchor" id="var-box-blur-2"><h3>box-blur-2</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels box-blur-2 cockatoo)) ...)</code></pre><img src="../images/pixels/f423d26a435e6fb000befa2319348e04.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L583">view source</a></div></div><div class="public anchor" id="var-box-blur-3"><h3>box-blur-3</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels box-blur-3 cockatoo)) ...)</code></pre><img src="../images/pixels/d1e4d14491f4954271e834111d6b7a22.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L584">view source</a></div></div><div class="public anchor" id="var-box-blur-5"><h3>box-blur-5</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels box-blur-5 cockatoo)) ...)</code></pre><img src="../images/pixels/e814799ae879b47c289976141824d6e4.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L585">view source</a></div></div><div class="public anchor" id="var-brightness-contrast"><h3>brightness-contrast</h3><div class="usage"><code>(brightness-contrast brightness contrast)</code><code>(brightness-contrast brightness)</code></div><div class="doc"><div class="markdown"><p>Create brightness / contrast filter.</p>
<p>Values from [0-2].</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Ligher</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (brightness-contrast 1.5) cockatoo)) ...)</code></pre><img src="../images/pixels/7b26637f38c34433fff6da5b34af4348.jpg" /></div><div><blockquote><p>Darker</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (brightness-contrast 0.5) cockatoo)) ...)</code></pre><img src="../images/pixels/5a3eed5c73ea1873b7a26ffaaf9d1abc.jpg" /></div><div><blockquote><p>More contrast</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (brightness-contrast 1.0 1.5) cockatoo))
       ...)</code></pre><img src="../images/pixels/47f68ceb462697662d1ec23b59ed8249.jpg" /></div><div><blockquote><p>Less contrast</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (brightness-contrast 1.0 0.5) cockatoo))
       ...)</code></pre><img src="../images/pixels/0d885becd683dc64d03ff5a1a8e31232.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L708">view source</a></div></div><div class="public anchor" id="var-clone-pixels"><h3>clone-pixels</h3><div class="usage"><code>(clone-pixels p)</code></div><div class="doc"><div class="markdown"><p>Clone Pixels, returns new object</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [p1 (pixels 100 100)]
  (set-color! p1 10 10 :maroon)
  (get-color (clone-pixels p1) 10 10))
;;=&gt; [128.0 0.0 0.0 255.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L232">view source</a></div></div><div class="public anchor" id="var-compose-channels"><h3>compose-channels</h3><div class="usage"><code>(compose-channels n1 n2 n3 n4 p1 p2)</code><code>(compose-channels n1 n2 n3 p1 p2)</code><code>(compose-channels n p1 p2)</code><code>(compose-channels n do-alpha? p1 p2)</code></div><div class="doc"><div class="markdown"><p>Compose channels with blending functions.</p>
<p>You can give blending method name as keyword defined in <a href="null">blends-names</a>. Or it can be blending function which accepts 2 doubles from 0.0 to 1.0 and returns double (0.0 - 1.0).</p>
<p>When there is no processing function for alpha, W3C alpha blending is applied.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Add two versions of the image</p></blockquote><pre><code class="hljs clojure">(saver
 (fn []
   (compose-channels :add cockatoo (filter-channels solarize cockatoo)))
 ...)</code></pre><img src="../images/pixels/07873c07ac11c12f0aad2573d8381e4a.jpg" /></div><div><blockquote><p>XOR two versions of the image</p></blockquote><pre><code class="hljs clojure">(saver
 (fn []
   (compose-channels :xor cockatoo (filter-channels solarize cockatoo)))
 ...)</code></pre><img src="../images/pixels/6b3db6e3698f191f08e43340ff0b5068.jpg" /></div><div><blockquote><p>Use different blending method for every channel.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (compose-channels :divide
                           :multiply
                           :mburn
                           cockatoo
                           (filter-channels solarize cockatoo)))
       ...)</code></pre><img src="../images/pixels/3c1c405f30cae9425485f0f8f0774613.jpg" /></div><div><blockquote><p>Use custom function</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (compose-channels (fn [v1 v2] (* v1 (- 1.0 v2)))
                           cockatoo
                           (filter-channels solarize cockatoo)))
       ...)</code></pre><img src="../images/pixels/a47f8e5dcaa7adf13baec9111f4349aa.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L485">view source</a></div></div><div class="public anchor" id="var-composite"><h3>composite</h3><div class="usage"><code>(composite n)</code></div><div class="doc"><div class="markdown"><p>Create java.awt.Composite object which can be used in <a href="clojure2d.core.html#var-set-composite">set-composite</a>.</p>
<p>Used to change default blending during drawing.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L505">view source</a></div></div><div class="public anchor" id="var-dilate"><h3>dilate</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Dilate filter. See: <a href="clojure2d.pixels.html#var-dilate-cross">dilate-cross</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels dilate buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/75aac12b888ecc53fd9635edf5d7447c.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L538">view source</a></div></div><div class="public anchor" id="var-dilate-cross"><h3>dilate-cross</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Dilate using 5 pixels. See: <a href="clojure2d.pixels.html#var-dilate">dilate</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels dilate-cross buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/c181fcaf97075b90387faa8ffeb882e2.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L547">view source</a></div></div><div class="public anchor" id="var-equalize"><h3>equalize</h3><div class="usage"><code>(equalize ch target p)</code></div><div class="doc"><div class="markdown"><p>Equalize histogram.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels equalize cockatoo)) ...)</code></pre><img src="../images/pixels/1c4b1fe48a9eb3194dce51c7348e690e.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L640">view source</a></div></div><div class="public anchor" id="var-erode"><h3>erode</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Erode filter. See: <a href="clojure2d.pixels.html#var-erode-cross">erode-cross</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels erode buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/6e6fc6ce94b1ce5f5c5a97f6b5ebe115.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L530">view source</a></div></div><div class="public anchor" id="var-erode-cross"><h3>erode-cross</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Erode using 5 pixels. See: <a href="clojure2d.pixels.html#var-erode">erode</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels erode-cross buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/1d08a8c216bd47597d6c13a330c4eb52.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L546">view source</a></div></div><div class="public anchor" id="var-filter-channel"><h3>filter-channel</h3><div class="usage"><code>(filter-channel f ch target p)</code><code>(filter-channel f)</code></div><div class="doc"><div class="markdown"><p>Filter one channel, write result into target.</p>
<p>This is helper function to create own filters.</p>
<p>Function parameter is channel value and should return new value.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Operate on blue channel</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [target (pixels 150 150)
               filter (fn [v] (- 255 (/ v 2)))]
           (filter-channel filter 2 target cockatoo)
           target))
       ...)</code></pre><img src="../images/pixels/cf7f246d00f72822bce807926aedf4d0.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L367">view source</a></div></div><div class="public anchor" id="var-filter-channel-xy"><h3>filter-channel-xy</h3><div class="usage"><code>(filter-channel-xy f ch target p)</code><code>(filter-channel-xy f)</code></div><div class="doc"><div class="markdown"><p>Filter one channel, write result into target.</p>
<p>This is helper function to create own filter.</p>
<p>Function parameters are: channel, pixels, x and y position.</p>
<p>Note: channel is first parameter.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Create filter and process channel.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [target (pixels 150 150)
               filter (fn [ch p x y]
                        (let [v1 (get-value p ch (dec x) y)
                              v2 (get-value p ch (inc x) y)
                              v3 (get-value p ch x (dec y))
                              v4 (get-value p ch x (inc y))
                              avg (/ (+ v1 v2 v3 v4) 4.0)]
                          (if (&lt; avg 128) 0 255)))]
           (filter-channel-xy filter 0 target cockatoo)
           (let [c0 (get-channel target 0)]
             (set-channel! target 1 c0)
             (set-channel! target 2 c0))
           target))
       ...)</code></pre><img src="../images/pixels/f3cbce80bbe5d58cc5629732e030dbfc.jpg" /></div><div><blockquote><p>Create filter and process channel. Using <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a>.</p></blockquote><pre><code class="hljs clojure">(saver
 (fn []
   (let [filter (filter-channel-xy (fn [ch p x y]
                                     (let [v1 (get-value p ch (dec x) y)
                                           v2 (get-value p ch (inc x) y)
                                           v3 (get-value p ch x (dec y))
                                           v4 (get-value p ch x (inc y))
                                           avg (/ (+ v1 v2 v3 v4) 4.0)]
                                       (if (&lt; avg 128) 0 255))))
         target (filter-channels filter nil nil nil cockatoo)]
     (let [c0 (get-channel target 0)]
       (set-channel! target 1 c0)
       (set-channel! target 2 c0))
     target))
 ...)</code></pre><img src="../images/pixels/1c128f56c07d0f361fafbc91282e3ab4.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L380">view source</a></div></div><div class="public anchor" id="var-filter-channels"><h3>filter-channels</h3><div class="usage"><code>(filter-channels f0 f1 f2 f3 p)</code><code>(filter-channels f p)</code><code>(filter-channels f do-alpha? p)</code></div><div class="doc"><div class="markdown"><p>Filter channels parallelly with filtering function. Build filtering function using <code>filter-channel</code> or <code>filter-channel-xy</code> helpers as with filter aplied partially. Filtering function parameters are: channel, target and source pixels.</p>
<p>When you pass one filter, three RGB channels will be processed (arity: 2). To enable alpha set <code>do-alpha</code> parameter to <code>true</code> (arity: 3). You can also use different filter for every channel separately (arity 5). Set <code>nil</code> to skip particular channel.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply equalize filter for all channels</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels equalize cockatoo)) ...)</code></pre><img src="../images/pixels/1c4b1fe48a9eb3194dce51c7348e690e.jpg" /></div><div><blockquote><p>Apply 2 filters separately for 2 channels</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels negate (box-blur 10) nil nil cockatoo))
       ...)</code></pre><img src="../images/pixels/52ede332cc0d6742de13e103cb63c6b3.jpg" /></div><div><blockquote><p>Create gamma filter and use it to process channels</p></blockquote><pre><code class="hljs clojure">(saver
 (fn []
   (let [gamma-fn
         (fn [amt v]
           (let [vv (/ v 255.0) p (m/pow vv (/ amt))] (* p 255.0)))
         my-gamma (partial gamma-fn 0.2)]
     (filter-channels (partial filter-channel my-gamma) cockatoo)))
 ...)</code></pre><img src="../images/pixels/c3acd6b8035d13d08e3072fd6a8f07b6.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L396">view source</a></div></div><div class="public anchor" id="var-filter-colors"><h3>filter-colors</h3><div class="usage"><code>(filter-colors f p)</code></div><div class="doc"><div class="markdown"><p>Filter colors.</p>
<p>Filtering function should accept color and return color.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Convert to other colorspace.</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-colors c/to-LUV* cockatoo)) ...)</code></pre><img src="../images/pixels/e8ddb72e25e019fe6ff44f206f76fbf7.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L332">view source</a></div></div><div class="public anchor" id="var-filter-colors-xy"><h3>filter-colors-xy</h3><div class="usage"><code>(filter-colors-xy f p)</code></div><div class="doc"><div class="markdown"><p>Filter colors.</p>
<p>Filtering function should accept Pixels, position as x,y values and return color</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Shift image up.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [filter (fn [p x y] (get-color p x (+ y 75)))]
           (binding [*pixels-edge* :wrap]
             (filter-colors-xy filter cockatoo))))
       ...)</code></pre><img src="../images/pixels/c9cf45e8a5f8c6cf8373173affacd563.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L349">view source</a></div></div><div class="public anchor" id="var-gaussian-blur"><h3>gaussian-blur</h3><div class="usage"><code>(gaussian-blur radius)</code></div><div class="doc"><div class="markdown"><p>Create gaussian blur for given radius.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (gaussian-blur 20) cockatoo)) ...)</code></pre><img src="../images/pixels/71a9cabadfe431ae91ab888e60b6a9af.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L587">view source</a></div></div><div class="public anchor" id="var-gaussian-blur-1"><h3>gaussian-blur-1</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels gaussian-blur-1 cockatoo)) ...)</code></pre><img src="../images/pixels/a9231faa500962b5ab27524cb5cdf16d.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L594">view source</a></div></div><div class="public anchor" id="var-gaussian-blur-2"><h3>gaussian-blur-2</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels gaussian-blur-2 cockatoo)) ...)</code></pre><img src="../images/pixels/43eb579ec4017d34f6c56813f94946e8.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L595">view source</a></div></div><div class="public anchor" id="var-gaussian-blur-3"><h3>gaussian-blur-3</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels gaussian-blur-3 cockatoo)) ...)</code></pre><img src="../images/pixels/76e674e9ce6457b2b23d859e2ae9d0b1.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L596">view source</a></div></div><div class="public anchor" id="var-gaussian-blur-5"><h3>gaussian-blur-5</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels gaussian-blur-5 cockatoo)) ...)</code></pre><img src="../images/pixels/068a6fa8fcbd3b2ab0533ac54322a93c.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L597">view source</a></div></div><div class="public anchor" id="var-get-channel"><h3>get-channel</h3><div class="usage"><code>(get-channel pixels ch)</code></div><div class="doc"><div class="markdown"><p>Return whole <code>ints</code> array with chosen channel</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Extract one channel from Pixels.</p></blockquote><pre><code class="hljs clojure">(first (get-channel cockatoo 1))
;;=&gt; 91</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L903">view source</a></div></div><div class="public anchor" id="var-get-color"><h3>get-color</h3><div class="usage"><code>(get-color pixels x y)</code><code>(get-color pixels idx)</code></div><div class="doc"><div class="markdown"><p>Get color by index or position. In case of low density rendering returns current average color without alpha value.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Get channel value from given position.</p></blockquote><pre><code class="hljs clojure">(get-color cockatoo 20 20)
;;=&gt; [60.0 100.0 161.0 255.0]
(get-color cockatoo -10 -10)
;;=&gt; [51.0 91.0 152.0 255.0]
(get-color cockatoo 20)
;;=&gt; [52.0 92.0 153.0 255.0]
(get-color cockatoo 10000)
;;=&gt; [56.0 66.0 39.0 255.0]
(get-color (core/canvas 100 100) 50 50)
;;=&gt; [0.0 0.0 0.0 0.0]
(get-color (core/load-image "docs/cockatoo.jpg") 50 50)
;;=&gt; [176.0 191.0 184.0 255.0]</code></pre></div><div><blockquote><p>Low density pixels color access.</p></blockquote><pre><code class="hljs clojure">(let [ldp (renderer 100 100)
      v0 (get-color ldp 50 50)
      v1 (get-color (set-color! ldp 50 50 :maroon) 50 50)]
  {:before v0, :after v1})
;;=&gt; {:after [128.0 0.0 0.0 255.0],
;;=&gt;  :before [##NaN ##NaN ##NaN 255.0]}</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L885">view source</a></div></div><div class="public anchor" id="var-get-pixel"><h3>get-pixel</h3><div class="usage"><code>(get-pixel r x y)</code></div><div class="doc"><div class="markdown"><p>Get pixel (color) from renderer buffer</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L925">view source</a></div></div><div class="public anchor" id="var-get-value"><h3>get-value</h3><div class="usage"><code>(get-value pixels ch x y)</code><code>(get-value pixels ch idx)</code></div><div class="doc"><div class="markdown"><p>Get channel value by index or position.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Get channel value from given position.</p></blockquote><pre><code class="hljs clojure">(get-value cockatoo 1 20 20)
;;=&gt; 100
(get-value cockatoo 3 20 20)
;;=&gt; 255
(get-value cockatoo 0 -10 -10)
;;=&gt; 51
(get-value cockatoo 1 20)
;;=&gt; 92
(get-value cockatoo 3 20)
;;=&gt; 255
(get-value cockatoo 0 10000)
;;=&gt; 56</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L879">view source</a></div></div><div class="public anchor" id="var-gradient-renderer"><h3>gradient-renderer</h3><div class="usage"><code>(gradient-renderer w h filter filter-radius &amp; filter-params)</code><code>(gradient-renderer w h filter)</code><code>(gradient-renderer w h)</code></div><div class="doc"><div class="markdown"><p>Create gradient renderer.</p>
<p>Optionally you can pass antialiasing filter and its parameters. Defaults to <code>:none</code>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver
 (fn* []
   (let [r (gradient-renderer 300 300)]
     (dotimes [i 4000000]
       (let [x (+ 150 (r/grand 30))
             y (+ 150 (r/grand 30))
             x (+ x
                  (* 20.0
                     (- (local-noise (/ x 50.0) (/ y 50.0) 0.34) 0.5)))
             y (+ y
                  (* 20.0
                     (- (local-noise (/ y 50.0) (/ x 50.0) 2.23) 0.5)))]
         (add-pixel! r x y)))
     (to-pixels r)))
 ...)</code></pre><img src="../images/pixels/0294ccc4e231e270dcb1e806ad9c1333.jpg" /></div><div><blockquote><p>Render with different gradient</p></blockquote><pre><code class="hljs clojure">(saver
 (fn* []
   (let [r (gradient-renderer 300 300)]
     (dotimes [i 4000000]
       (let [x (+ 150 (r/grand 30))
             y (+ 150 (r/grand 30))
             x (+ x
                  (* 20.0
                     (- (local-noise (/ x 50.0) (/ y 50.0) 0.34) 0.5)))
             y (+ y
                  (* 20.0
                     (- (local-noise (/ y 50.0) (/ x 50.0) 2.23) 0.5)))]
         (add-pixel! r x y)))
     (to-pixels r {:gradient (c/gradient (c/palette :prl-10))})))
 ...)</code></pre><img src="../images/pixels/bd0023ac614b2c8f0f6162c3760f2766.jpg" /></div><div><blockquote><p>Render with logarithmic scale</p></blockquote><pre><code class="hljs clojure">(saver
 (fn* []
   (let [r (gradient-renderer 300 300)]
     (dotimes [i 4000000]
       (let [x (+ 150 (r/grand 30))
             y (+ 150 (r/grand 30))
             x (+ x
                  (* 20.0
                     (- (local-noise (/ x 50.0) (/ y 50.0) 0.34) 0.5)))
             y (+ y
                  (* 20.0
                     (- (local-noise (/ y 50.0) (/ x 50.0) 2.23) 0.5)))]
         (add-pixel! r x y)))
     (to-pixels r {:logarithmic? true})))
 ...)</code></pre><img src="../images/pixels/71f1c2256c4e77a66fcf2859b45e340c.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L855">view source</a></div></div><div class="public anchor" id="var-horizontal-blur"><h3>horizontal-blur</h3><div class="usage"><code>(horizontal-blur radius)</code></div><div class="doc"><div class="markdown"><p>Create horizontal blur for given radius.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (horizontal-blur 20) cockatoo)) ...)</code></pre><img src="../images/pixels/d39403029fc768ccd2fc4c2683db186d.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L551">view source</a></div></div><div class="public anchor" id="var-horizontal-blur-1"><h3>horizontal-blur-1</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels horizontal-blur-1 cockatoo)) ...)</code></pre><img src="../images/pixels/5f774b4af0e4a23f611a8a65abfefeef.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L558">view source</a></div></div><div class="public anchor" id="var-horizontal-blur-2"><h3>horizontal-blur-2</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels horizontal-blur-2 cockatoo)) ...)</code></pre><img src="../images/pixels/e0a24ed10f067b9502e862aad492f9f8.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L559">view source</a></div></div><div class="public anchor" id="var-horizontal-blur-3"><h3>horizontal-blur-3</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels horizontal-blur-3 cockatoo)) ...)</code></pre><img src="../images/pixels/9efe7ac73b6f85dd8b263d491335947f.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L560">view source</a></div></div><div class="public anchor" id="var-horizontal-blur-5"><h3>horizontal-blur-5</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels horizontal-blur-5 cockatoo)) ...)</code></pre><img src="../images/pixels/45f23e9cbb3854e189339a356cdd406c.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L561">view source</a></div></div><div class="public anchor" id="var-load-pixels"><h3>load-pixels</h3><div class="usage"><code>(load-pixels n)</code></div><div class="doc"><div class="markdown"><p>Load <code>Pixels</code> from file.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Load file</p></blockquote><pre><code class="hljs clojure">(load-pixels "docs/cockatoo.jpg")
;;=&gt; pixels (150, 150)</code></pre></div><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (load-pixels "docs/cockatoo.jpg")) ...)</code></pre><img src="../images/pixels/baeec22857c7f783c8a743d5bb56ecdd.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L278">view source</a></div></div><div class="public anchor" id="var-median"><h3>median</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Median filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels median buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/bfa5b070c3c09beb611f763d6ee3ce6d.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L534">view source</a></div></div><div class="public anchor" id="var-merge-gradient-renderers"><h3>merge-gradient-renderers</h3><div class="usage"><code>(merge-gradient-renderers target &amp; renderers)</code></div><div class="doc"><div class="markdown"><p>Merge gradient renderers and store result to the target.</p>
<p>Use this function to merge separate rendereing results (ex. from separeted threads).</p>
<p>This is mutating function. Data from list of renderers is added to the target.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L866">view source</a></div></div><div class="public anchor" id="var-merge-renderers"><h3>merge-renderers</h3><div class="usage"><code>(merge-renderers target &amp; renderers)</code></div><div class="doc"><div class="markdown"><p>Paralelly merge renderers and store result to the target.</p>
<p>Use this function to merge separate rendereing results (ex. from separeted threads).</p>
<p>This is mutating function. Data from list of renderers is added to the target.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L817">view source</a></div></div><div class="public anchor" id="var-modulate"><h3>modulate</h3><div class="usage"><code>(modulate amt)</code></div><div class="doc"><div class="markdown"><p>Create modulate channel values filter.</p>
<p>Great to work with hue based color spaces.</p>
<p>Values from [0-2].</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Saturate</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (-&gt;&gt; cockatoo
              (filter-colors c/to-HSB*)
              (filter-channels nil (modulate 2.0) nil nil)
              (filter-colors c/from-HSB*)))
       ...)</code></pre><img src="../images/pixels/f0972da091c543fcd97f0202da325998.jpg" /></div><div><blockquote><p>Desaturate</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (-&gt;&gt; cockatoo
              (filter-colors c/to-HCL*)
              (filter-channels nil (modulate 0.2) nil nil)
              (filter-colors c/from-HCL*)))
       ...)</code></pre><img src="../images/pixels/0e1f52f576abcdef9bddf691ffee46a2.jpg" /></div><div><blockquote><p>Shift hue</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (-&gt;&gt; cockatoo
              (filter-colors c/to-HCL*)
              (filter-channels (modulate 0.2) nil nil nil)
              (filter-colors c/from-HCL*)))
       ...)</code></pre><img src="../images/pixels/4c18080d9b5ff73dff2fdafdfdfd0f2b.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L697">view source</a></div></div><div class="public anchor" id="var-negate"><h3>negate</h3><div class="usage"><code>(negate ch target p)</code></div><div class="doc"><div class="markdown"><p>Negate filer.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L646">view source</a></div></div><div class="public anchor" id="var-normalize"><h3>normalize</h3><div class="usage"><code>(normalize ch target p)</code></div><div class="doc"><div class="markdown"><p>Normalize channel values to full range.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels normalize cockatoo)) ...)</code></pre><img src="../images/pixels/a7c5e119db8dd017c7f3f9d5270811a9.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L634">view source</a></div></div><div class="public anchor" id="var-pixels"><h3>pixels</h3><div class="usage"><code>(pixels a w h)</code><code>(pixels w h)</code></div><div class="doc"><div class="markdown"><p>Create empty <code>Pixels</code> object with [w,h] dimensions.</p>
<p>Optionally you can pass <code>ints</code> array <code>a</code> as a buffer. Size of array should be <code>(* 4 w h)</code>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Create pixels</p></blockquote><pre><code class="hljs clojure">(pixels 100 100)
;;=&gt; pixels (100, 100)</code></pre></div><div><blockquote><p>Create pixels with given array</p></blockquote><pre><code class="hljs clojure">(pixels (int-array (* 10 10 4)) 10 10)
;;=&gt; pixels (10, 10)</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L221">view source</a></div></div><div class="public anchor" id="var-posterize"><h3>posterize</h3><div class="usage"><code>(posterize levels)</code></div><div class="doc"><div class="markdown"><p>Create posterize filter for given radius.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (posterize 2) cockatoo)) ...)</code></pre><img src="../images/pixels/fed569129cdcaf745620b61f4b6d1fcc.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L601">view source</a></div></div><div class="public anchor" id="var-posterize-16"><h3>posterize-16</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels posterize-16 cockatoo)) ...)</code></pre><img src="../images/pixels/52e38b49da3645096404243bff0f2876.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L611">view source</a></div></div><div class="public anchor" id="var-posterize-4"><h3>posterize-4</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels posterize-4 cockatoo)) ...)</code></pre><img src="../images/pixels/6cdebd78daeb3a40fe9b2137d294a6b1.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L609">view source</a></div></div><div class="public anchor" id="var-posterize-8"><h3>posterize-8</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels posterize-8 cockatoo)) ...)</code></pre><img src="../images/pixels/9f54423fddfe14d7f6de1c14ae9017e4.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L610">view source</a></div></div><div class="public anchor" id="var-quantile-1"><h3>quantile-1</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Quantile (2/9) filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels quantile-1 buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/39e80f6bee2550e1d23b83054c29aa08.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L531">view source</a></div></div><div class="public anchor" id="var-quantile-2"><h3>quantile-2</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Quantile (3/9) filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels quantile-2 buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/e027f0947eb4c93e5dd73cef9daf991f.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L532">view source</a></div></div><div class="public anchor" id="var-quantile-3"><h3>quantile-3</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Quantile (4/9) filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels quantile-3 buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/11c81199841553409c78e5e3f54fe3cc.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L533">view source</a></div></div><div class="public anchor" id="var-quantile-5"><h3>quantile-5</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Quantile (6/9) filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels quantile-5 buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/9933f71a8edef5af12b15f4f529526ff.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L535">view source</a></div></div><div class="public anchor" id="var-quantile-6"><h3>quantile-6</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Quantile (7/9) filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels quantile-6 buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/90a883b22a9886c89d95f712e7caef51.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L536">view source</a></div></div><div class="public anchor" id="var-quantile-7"><h3>quantile-7</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Quantile (8/9) filter</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Apply filter 5 times.</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (reduce (fn [buff _] (filter-channels quantile-7 buff))
                 cockatoo
                 (range 5)))
       ...)</code></pre><img src="../images/pixels/c3bece813774c1e2f892f5ae7b40ef0a.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L537">view source</a></div></div><div class="public anchor" id="var-renderer"><h3>renderer</h3><div class="usage"><code>(renderer w h filter filter-radius &amp; filter-params)</code><code>(renderer w h filter)</code><code>(renderer w h)</code></div><div class="doc"><div class="markdown"><p>Create renderer.</p>
<p>Optionally you can pass antialiasing filter and its parameters. Defaults to <code>:none</code>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver
 (fn* []
   (let [r (renderer 300 300)]
     (dotimes [i 20000000]
       (let [x (+ 150 (r/grand 30))
             y (+ 150 (r/grand 30))
             x (+ x
                  (* 20.0
                     (- (local-noise (/ x 50.0) (/ y 50.0) 0.34) 0.5)))
             y (+ y
                  (* 20.0
                     (- (local-noise (/ y 50.0) (/ x 50.0) 2.23) 0.5)))]
         (add-pixel! r x y :white)))
     (to-pixels r {:gamma-alpha 0.6, :gamma-color 0.8})))
 ...)</code></pre><img src="../images/pixels/626c5d8270a08edc4ed379e4b1d22da7.jpg" /></div><div><blockquote><p>Compare to native Java2d rendering. You can observe oversaturation.</p></blockquote><pre><code class="hljs clojure">(saver
 (fn* []
   (let [r (core/black-canvas 300 300)]
     (core/with-canvas
      [c r]
      (core/set-color c :white 5)
      (dotimes [i 2000000]
        (let [x (+ 150 (r/grand 30))
              y (+ 150 (r/grand 30))
              x (+ x
                   (* 20.0
                      (- (local-noise (/ x 50.0) (/ y 50.0) 0.34) 0.5)))
              y (+ y
                   (* 20.0
                      (- (local-noise (/ y 50.0) (/ x 50.0) 2.23)
                         0.5)))]
          (core/point c x y))))
     (to-pixels r)))
 ...)</code></pre><img src="../images/pixels/5e74e2329473b9dea52d7bc7802fcdf1.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L793">view source</a></div></div><div class="public anchor" id="var-set-canvas-pixels.21"><h3>set-canvas-pixels!</h3><div class="usage"><code>(set-canvas-pixels! canvas x y p)</code><code>(set-canvas-pixels! canvas p)</code></div><div class="doc"><div class="markdown"><p>Set <code>Pixels</code> to canvas. See <a href="clojure2d.pixels.html#var-set-image-pixels.21">set-image-pixels!</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver
 (fn []
   (let [i (core/canvas 100 100)
         p2 (pixels 40 40)]
     (core/with-canvas [c i]
                       (core/set-background c :maroon)
                       (to-pixels (set-canvas-pixels! c 25 15 p2)))))
 ...)</code></pre><img src="../images/pixels/c5d0e970d4b9f0c4c071170e1cdff66b.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L268">view source</a></div></div><div class="public anchor" id="var-set-channel.21"><h3>set-channel!</h3><div class="usage"><code>(set-channel! pixels ch v)</code></div><div class="doc"><div class="markdown"><p>Set whole channel (as <code>ints</code> array)</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Copy channels</p></blockquote><pre><code class="hljs clojure">(get-color
 (set-channel! (clone-pixels cockatoo) 0 (get-channel cockatoo 1))
 20
 20)
;;=&gt; [100.0 100.0 161.0 255.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L908">view source</a></div></div><div class="public anchor" id="var-set-color.21"><h3>set-color!</h3><div class="usage"><code>(set-color! pixels x y v)</code><code>(set-color! pixels idx v)</code></div><div class="doc"><div class="markdown"><p>Set color value by index or position</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Set color in pixels</p></blockquote><pre><code class="hljs clojure">(let [p (pixels 100 100)
      v0 (get-color p 50 50)
      v1 (get-color (set-color! p 50 50 :maroon) 50 50)]
  {:before v0, :after v1})
;;=&gt; {:after [128.0 0.0 0.0 255.0], :before [0.0 0.0 0.0 0.0]}</code></pre></div><div><blockquote><p>Low density pixels color access.</p></blockquote><pre><code class="hljs clojure">(let [ldp (renderer 100 100)
      v0 (get-color ldp 50 50)
      v1 (get-color (set-color! ldp 50 50 :maroon) 50 50)]
  {:before v0, :after v1})
;;=&gt; {:after [128.0 0.0 0.0 255.0],
;;=&gt;  :before [##NaN ##NaN ##NaN 255.0]}</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L897">view source</a></div></div><div class="public anchor" id="var-set-image-pixels.21"><h3>set-image-pixels!</h3><div class="usage"><code>(set-image-pixels! b x y pin)</code><code>(set-image-pixels! b p)</code></div><div class="doc"><div class="markdown"><p>Set <code>Pixels</code> to image, mutating it.</p>
<p>Optionally you can set position when Pixels object has smaller size.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (let [i (core/load-image "docs/cockatoo.jpg")
               p2 (pixels 40 40)]
           (to-pixels (set-image-pixels! i 25 15 p2))))
       ...)</code></pre><img src="../images/pixels/2d8d719dd9c415695a519f35e51a48eb.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L250">view source</a></div></div><div class="public anchor" id="var-set-value.21"><h3>set-value!</h3><div class="usage"><code>(set-value! pixels ch x y v)</code><code>(set-value! pixels ch idx v)</code></div><div class="doc"><div class="markdown"><p>Set channel value by index or position</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Set value in pixels</p></blockquote><pre><code class="hljs clojure">(let [p (pixels 100 100)
      v0 (get-value p 1 50 50)
      v1 (get-value (set-value! p 50 50 111) 50 50)]
  {:before v0, :after v1})
;;=&gt; {:after 111, :before 0}</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L891">view source</a></div></div><div class="public anchor" id="var-solarize"><h3>solarize</h3><div class="usage"><code>(solarize ch target p)</code></div><div class="doc"><div class="markdown"><p>Solarize filter.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels solarize cockatoo)) ...)</code></pre><img src="../images/pixels/4749afc0df9a60ed021ce9b4d22e0476.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L652">view source</a></div></div><div class="public anchor" id="var-threshold"><h3>threshold</h3><div class="usage"><code>(threshold amount)</code><code>(threshold amount-low amount-high)</code></div><div class="doc"><div class="markdown"><p>Create threshold filter.</p>
<p>You can pass <code>amount</code> from 0-1. or range.</p>
<p>Note if you want b&amp;w result first convert to gray color.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (threshold 0.9) cockatoo)) ...)</code></pre><img src="../images/pixels/097921c292aa57a11bb692fdb2595613.jpg" /></div><div><blockquote><p>Usage (two parameters)</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (threshold 0.6 0.9) cockatoo)) ...)</code></pre><img src="../images/pixels/8ec8a5347258ebe066f0dd920b57a2c7.jpg" /></div><div><blockquote><p>Usage on b&amp;w</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (filter-channels (threshold 0.4)
                          (filter-colors c/to-Gray* cockatoo)))
       ...)</code></pre><img src="../images/pixels/88f8fe346c22a2cbacedcc19c13b5f89.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L615">view source</a></div></div><div class="public anchor" id="var-threshold-25"><h3>threshold-25</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels threshold-25 cockatoo)) ...)</code></pre><img src="../images/pixels/deb488090689ecce5b561bf49c9907e2.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L630">view source</a></div></div><div class="public anchor" id="var-threshold-50"><h3>threshold-50</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels threshold-50 cockatoo)) ...)</code></pre><img src="../images/pixels/fe4b3d0ed10af7f9f5cc59049238d974.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L631">view source</a></div></div><div class="public anchor" id="var-threshold-75"><h3>threshold-75</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels threshold-75 cockatoo)) ...)</code></pre><img src="../images/pixels/96fb5aae38f54bad5bf25a91d26bded5.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L632">view source</a></div></div><div class="public anchor" id="var-tint"><h3>tint</h3><div class="usage"><code>(tint col)</code><code>(tint col-low col-high)</code><code>(tint col-low col-mid col-high)</code></div><div class="doc"><div class="markdown"><p>Create tinting filter.</p>
<ul>
  <li>one color - tint</li>
  <li>two colors - interpolate between <code>col-low</code> for black and <code>col-high</code> for white.</li>
  <li>three colors - like above but uses also <code>mid-color</code> for mid tones.</li>
</ul></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (tint :hotpink) cockatoo)) ...)</code></pre><img src="../images/pixels/3ab33ba4ff8fd54bea7aa970ee7041c9.jpg" /></div><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (tint :indigo :lightblue) cockatoo)) ...)</code></pre><img src="../images/pixels/b90fc7ed0708d18549b036b03b6d04ee.jpg" /></div><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn []
         (filter-channels (tint :gray :lightblue :maroon) cockatoo))
       ...)</code></pre><img src="../images/pixels/540a4c855b54da34fb3a38004e403659.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L660">view source</a></div></div><div class="public anchor" id="var-to-pixels"><h3>to-pixels</h3><div class="usage"><code>(to-pixels pixels)</code><code>(to-pixels pixels cfg)</code></div><div class="doc"><div class="markdown"><p>Convert to Pixels. For low density rendering provide configuration. Works with Image/Canvas/Window and low density renderer.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Convert various types to pixels</p></blockquote><pre><code class="hljs clojure">(to-pixels (pixels 100 100))
;;=&gt; pixels (100, 100)
(to-pixels (core/load-image "docs/cockatoo.jpg"))
;;=&gt; pixels (150, 150)
(to-pixels (core/canvas 50 50))
;;=&gt; pixels (50, 50)
(to-pixels (renderer 10 10))
;;=&gt; pixels (10, 10)</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L913">view source</a></div></div><div class="public anchor" id="var-vertical-blur"><h3>vertical-blur</h3><div class="usage"><code>(vertical-blur radius)</code></div><div class="doc"><div class="markdown"><p>Create vertical blur for given radius.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels (vertical-blur 20) cockatoo)) ...)</code></pre><img src="../images/pixels/d5678da4bc0cbfd849d96e05971db310.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L563">view source</a></div></div><div class="public anchor" id="var-vertical-blur-1"><h3>vertical-blur-1</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels vertical-blur-1 cockatoo)) ...)</code></pre><img src="../images/pixels/410695cc8ad602346ae9fa67e5260e15.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L570">view source</a></div></div><div class="public anchor" id="var-vertical-blur-2"><h3>vertical-blur-2</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels vertical-blur-2 cockatoo)) ...)</code></pre><img src="../images/pixels/e19ab67ee27b3a98168e78e4fa677c2a.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L571">view source</a></div></div><div class="public anchor" id="var-vertical-blur-3"><h3>vertical-blur-3</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels vertical-blur-3 cockatoo)) ...)</code></pre><img src="../images/pixels/55cf3b90684f9d009427885e817165f8.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L572">view source</a></div></div><div class="public anchor" id="var-vertical-blur-5"><h3>vertical-blur-5</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(saver (fn [] (filter-channels vertical-blur-5 cockatoo)) ...)</code></pre><img src="../images/pixels/88e17d89343f07fc8895389dedb3e77c.jpg" /></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/pixels.clj#L573">view source</a></div></div></div></body></html>